<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title id="page-title">WooHub</title>

  <!-- Tailwind & libraries -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.2/dist/vanilla-tilt.min.js" defer></script>

  <style>
    @keyframes bell-bounce      {0%,100%{transform:rotate(0);}25%{transform:rotate(10deg);}75%{transform:rotate(-10deg);}}
    @keyframes gradient-slide   {0%{background-position:0 50;}50%{background-position:100% 50;}100%{background-position:0 50;}}
    @keyframes slide-in         {to{transform:translateX(0);opacity:1;}}
    .suggestion-enter           {transform:translateX(-20px);opacity:0;}
    .suggestion-enter-active    {animation:slide-in .3s forwards;}
    @keyframes slide-down       {from{transform:translateY(-100%);}to{transform:translateY(0);}}
    #update-banner.show         {animation:slide-down .3s ease-out forwards;}
    #overlay ol                 {list-style:decimal;}
  </style>
</head>

<body class="bg-gray-100 text-gray-800 antialiased flex flex-col min-h-screen">

  <!-- Parallax BG -->
  <div id="parallax-bg"
       class="fixed inset-0 bg-[url('/assets/pattern.svg')] bg-center bg-cover pointer-events-none"
       style="transform:translateY(0)"></div>

  <noscript>
    <div class="p-4 bg-yellow-100 text-yellow-800">
      JavaScript is required to use WooHub.
    </div>
  </noscript>

  <!-- Header -->
  <header role="banner" class="relative bg-white shadow sticky top-0 z-20">
    <div class="flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8">
      <a href="#" onclick="event.preventDefault();" class="flex items-center">
        <img src="/assets/woohub_logo.png" alt="WooHub Logo" class="h-10"/>
      </a>

      <!-- Center search -->
      <div class="absolute left-1/2 transform -translate-x-1/2 w-full max-w-lg">
        <input
          id="search-input"
          type="search"
          placeholder="Search keywords..."
          aria-label="Search keywords"
          aria-controls="search-suggestions"
          aria-expanded="false"
          aria-autocomplete="list"
          class="w-full px-4 py-2 border bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 placeholder-gray-500"
        />
        <ul
          id="search-suggestions"
          role="listbox"
          class="absolute inset-x-0 mt-1 bg-white border rounded-lg shadow-lg hidden z-30 max-h-60 overflow-auto"
        ></ul>
      </div>

      <!-- Notifications & Recents -->
      <div class="flex items-center">
        <div class="relative">
          <button id="notification-btn" class="p-2 focus:outline-none" aria-label="Notifications" aria-haspopup="true" aria-expanded="false">
            <svg id="bellIcon" class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
            </svg>
            <span id="notification-count" class="hidden absolute -top-1 -right-1 inline-flex items-center justify-center px-1 text-xs font-bold text-white bg-red-600 rounded-full"></span>
          </button>
          <div id="notification-dropdown" class="hidden absolute right-0 mt-2 w-96 p-4 bg-white border rounded-lg shadow-lg z-40" role="menu" aria-label="Recent notifications">
            <ul id="notification-list" class="max-h-64 overflow-auto divide-y divide-gray-200" aria-live="polite"></ul>
            <div class="text-center p-2">
              <button id="clear-notifications" class="text-indigo-600 hover:underline focus:outline-none">Clear All</button>
            </div>
          </div>
        </div>

        <div class="relative ml-4">
          <button id="recent-btn" class="p-2 focus:outline-none" aria-label="Recently Viewed" aria-haspopup="true" aria-expanded="false">
            <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
          </button>
          <div id="recent-dropdown" class="hidden absolute right-0 mt-2 w-72 p-4 bg-white border rounded-lg shadow-lg z-40" role="menu" aria-label="Recently viewed items">
            <ul id="recent-list" class="max-h-60 overflow-auto divide-y divide-gray-200"></ul>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Update Banner -->
  <div id="update-banner" role="status" aria-live="polite" class="hidden bg-indigo-600 text-white flex items-center justify-center px-6 py-3 relative">
    <div id="update-banner-content" class="flex-1 text-sm font-medium text-center"></div>
    <button id="update-banner-close" aria-label="Close banner" class="absolute right-4 text-xl font-bold focus:outline-none">&times;</button>
  </div>

  <!-- Mobile Recent Updates Accordion -->
  <details class="lg:hidden px-4 mt-2">
    <summary class="flex items-center justify-between font-semibold cursor-pointer">
      <span>Recent Updates</span>
      <button id="mobile-updates-filter-toggle" class="p-1 focus:outline-none" aria-label="Toggle filter">
        <svg class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2l-7.414 7.414a1 1 0 00-.293.707V19l-4-4v-4a1 1 0 00-.293-.707L3.293 6.707A1 1 0 013 6V4z"/>
        </svg>
      </button>
    </summary>
    <div class="mt-2 space-y-2">
      <div id="mobile-updates-filter-container" class="hidden">
        <input id="mobile-updates-filter" type="text" placeholder="Filter updates..." class="w-full px-3 py-1 mb-2 border rounded-lg focus:ring-1 focus:ring-indigo-500"/>
      </div>
      <ul id="mobile-updates-container" class="max-h-60 overflow-auto pr-2 space-y-2" aria-live="polite"></ul>
      <button id="mobile-load-more-btn" class="w-full mt-2 text-indigo-600 hover:underline focus:outline-none">Load More</button>
    </div>
  </details>

  <!-- Main Content -->
  <div class="flex flex-1 w-full max-w-[2000px] mx-auto px-4 pt-6">
    <aside class="hidden lg:block w-80 lg:w-96 mr-6 space-y-6">
      <!-- Recent Updates Panel -->
      <div class="bg-white border rounded-lg p-4 sticky top-24">
        <div class="flex items-center justify-between mb-2">
          <h2 class="text-lg font-semibold">Recent Updates</h2>
          <button id="updates-filter-toggle" class="p-1 focus:outline-none"></button>
        </div>
        <div id="updates-filter-container" class="hidden mb-2">
          <input id="updates-filter" type="text" placeholder="Filter updates..." class="w-full p-2 border rounded"/>
        </div>
        <div class="max-h-96 overflow-auto pr-2 space-y-2">
          <ul id="updates-container" class="space-y-2" aria-live="polite"></ul>
        </div>
      </div>

      <!-- What’s Changed Panel -->
      <div class="bg-white border rounded-lg p-4 sticky top-[calc(6rem+1.5rem)] max-h-[16rem] flex flex-col overflow-hidden">
        <h2 class="text-lg font-semibold mb-2 flex-none">What’s changed?</h2>
        <div id="change-log" class="flex-1 overflow-auto text-sm text-gray-600 pr-2">
          <p>No updates yet...</p>
        </div>
      </div>
    </aside>

    <main role="main" class="flex-1 relative flex flex-col">
      <!-- Breadcrumbs -->
      <nav aria-label="Breadcrumb" class="text-sm mb-4">
        <ol class="flex text-gray-600">
          <li><a href="#" onclick="event.preventDefault();" class="hover:underline">Home</a></li>
          <li><span class="mx-2">/</span></li>
          <li>Dashboard</li>
        </ol>
      </nav>

      <!-- Detail View -->
      <section id="detail-container"
               class="hidden absolute inset-0 bg-white rounded-lg shadow p-6 flex flex-col overflow-auto"
               style="margin-bottom:1rem;">
        <button id="back-btn" class="self-start text-indigo-600 hover:underline mb-4 focus:outline-none">← Back to Dashboard</button>
        <h2 id="detail-title" class="text-2xl font-semibold mb-4"></h2>
        <ul id="detail-list" class="flex-1 overflow-auto list-disc pl-5 space-y-2"></ul>
      </section>

      <!-- Card Grid -->
      <section id="card-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"></section>
    </main>
  </div>

  <!-- Overlay Modal -->
  <div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-50 items-start justify-center overflow-auto z-40" role="dialog" aria-modal="true">
    <div class="bg-white rounded-lg shadow-lg w-11/12 md:w-3/4 lg:w-1/2 max-h-[90vh] overflow-auto p-6 relative mt-20 mx-auto" tabindex="-1">
      <button id="overlay-close" class="absolute top-4 right-4 text-2xl focus:outline-none">&times;</button>
      <button id="copy-btn" class="absolute top-4 right-12 text-sm hidden focus:outline-none">Copy</button>
      <h2 id="overlay-header" class="text-2xl font-semibold mb-4"></h2>
      <div id="overlay-body" class="space-y-4" tabindex="0"></div>
    </div>
  </div>

  <!-- Jump to Top -->
  <button id="to-top" class="hidden fixed bottom-6 right-6 p-3 rounded-full shadow-lg bg-indigo-600 text-white focus:outline-none" aria-label="Scroll to top">↑</button>

  <!-- Footer -->
  <footer class="bg-white border-t relative bottom-0 w-full z-20">
    <div class="flex justify-between items-center h-12 px-4">
      <p class="text-sm text-gray-500 m-0">© 2025 WooHub. All rights reserved.</p>
      <p class="text-sm text-gray-500 m-0">Developed By: Christine Anastacio</p>
    </div>
  </footer>

  <!-- Initialization scripts moved out -->
  <script src="init.js"></script>
</body>
</html>
